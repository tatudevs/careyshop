(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21ebd1"],{d79a:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"cs-p"},[a("el-form",{attrs:{inline:!0,size:"small"}},[t.auth.info?a("el-form-item",[a("el-button",{attrs:{icon:"el-icon-warning-outline",disabled:t.loading},on:{click:t.handleInfo}},[t._v("优惠劵信息")])],1):t._e(),"delete"!==t.couponType&&t.auth.del?a("el-form-item",[a("el-button",{attrs:{icon:"el-icon-delete",disabled:t.loading},on:{click:function(e){return t.handleStatus(null,"del")}}},[t._v("删除")])],1):t._e(),"delete"===t.couponType&&t.auth.rec?a("el-form-item",[a("el-button",{attrs:{icon:"el-icon-refresh-left",disabled:t.loading},on:{click:function(e){return t.handleStatus(null,"rec")}}},[t._v("恢复")])],1):t._e(),a("cs-help",{staticStyle:{"padding-bottom":"19px"},attrs:{router:t.$route.path}})],1),a("el-table",{attrs:{data:t.currentTableData,"highlight-current-row":!0},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{align:"center",type:"selection",width:"55"}}),a("el-table-column",{attrs:{label:"兑换码",prop:"exchange_code"}}),a("el-table-column",{attrs:{label:"订单号",prop:"order_no","min-width":"160"}}),a("el-table-column",{attrs:{label:"关联账号",prop:"get_user.username"}}),a("el-table-column",{attrs:{label:"使用日期",align:"center",prop:"use_time",width:"160"}}),a("el-table-column",{attrs:{label:"是否有效",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:t.invalidMap[e.row.get_coupon.is_invalid].type,size:"mini",effect:"plain"}},[t._v(" "+t._s(t.invalidMap[e.row.get_coupon.is_invalid].text)+" ")])]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return["delete"!==t.couponType&&t.auth.del?a("el-button",{attrs:{size:"small",type:"text"},on:{click:function(a){return t.handleStatus(e.$index,"del")}}},[t._v("删除")]):t._e(),"delete"===t.couponType&&t.auth.rec?a("el-button",{attrs:{size:"small",type:"text"},on:{click:function(a){return t.handleStatus(e.$index,"rec")}}},[t._v("恢复")]):t._e()]}}])})],1),a("el-dialog",{attrs:{title:"优惠劵信息",visible:t.infoVisible,"append-to-body":!0,"close-on-click-modal":!1,width:"650px"},on:{"update:visible":function(e){t.infoVisible=e}}},[t.couponData?a("el-form",{staticStyle:{"margin-top":"-25px"},attrs:{"label-width":"110px","label-position":"left"}},[a("cs-print",{ref:"print"},[a("el-form-item",{attrs:{label:"名称："}},[a("span",[t._v(t._s(t.couponData.name))])]),a("el-form-item",{attrs:{label:"描述："}},[a("span",[t._v(t._s(t.couponData.description||"-"))])]),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"类型："}},[a("span",[t._v(t._s(t.typeMap[t.couponData.type]))])])],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"领取码："}},[a("span",[t._v(t._s(t.couponData.give_code))])])],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"优惠金额："}},[a("span",[t._v(t._s(t._f("getNumber")(t.couponData.money)))])])],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"使用门槛："}},[a("span",[t._v("满 "+t._s(t._f("getNumber")(t.couponData.quota)))])])],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"限领次数："}},[a("span",[t._v(t._s(t.couponData.frequency||"不限次数"))])])],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"发放数："}},[a("span",[t._v(t._s(t.couponData.give_num))])])],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"领取数："}},[a("span",[t._v(t._s(t.couponData.receive_num))])])],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"使用数："}},[a("span",[t._v(t._s(t.couponData.use_num))])])],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"状态："}},[a("el-tag",{attrs:{type:t.statusMap[t.couponData.status].type,effect:"plain",size:"mini"}},[t._v(" "+t._s(t.statusMap[t.couponData.status].text)+" ")])],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"是否有效："}},[a("el-tag",{attrs:{type:t.invalidMap[t.couponData.is_invalid].type,effect:"plain",size:"mini"}},[t._v(" "+t._s(t.invalidMap[t.couponData.is_invalid].text)+" ")])],1)],1)],1),a("el-divider"),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"发放开始日期："}},[a("span",[t._v(t._s(t.couponData.give_begin_time))])])],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"发放结束日期："}},[a("span",[t._v(t._s(t.couponData.give_end_time))])])],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"使用开始日期："}},[a("span",[t._v(t._s(t.couponData.use_begin_time))])])],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"使用截止日期："}},[a("span",[t._v(t._s(t.couponData.use_end_time))])])],1)],1)],1)],1):t._e(),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("div",{staticClass:"cs-fl"},[a("el-button",{attrs:{icon:"el-icon-printer",size:"small"},on:{click:function(e){return t.$refs.print.toPrint()}}},[t._v("打印")])],1),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.infoVisible=!1}}},[t._v("确定")])],1)],1)],1)},l=[],i=(a("4160"),a("d3b7"),a("159b"),a("ca00")),o=a("4de4f"),s={components:{csPrint:function(){return a.e("chunk-2d238a43").then(a.bind(null,"fff3"))}},props:{loading:{default:!1},tableData:{default:function(){return[]}},couponData:{default:null},couponType:{default:""}},data:function(){return{infoVisible:!1,currentTableData:[],multipleSelection:[],auth:{info:!1,del:!1,rec:!1},typeMap:{0:"指定会员",1:"批量生成",2:"主动领取",3:"营销赠送"},invalidMap:{0:{text:"正常",type:"success"},1:{text:"无效",type:"danger"}},statusMap:{0:{text:"禁用",type:"danger"},1:{text:"启用",type:"success"}}}},filters:{getNumber:function(t){return i["a"].getNumber(t)}},watch:{tableData:{handler:function(t){this.currentTableData=t},immediate:!0}},mounted:function(){this._validationAuth()},methods:{_validationAuth:function(){this.auth.info=this.$permission("/marketing/coupon/give/info"),this.auth.del=this.$permission("/marketing/coupon/give/del"),this.auth.rec=this.$permission("/marketing/coupon/give/rec")},_getIdList:function(t){null===t&&(t=this.multipleSelection);var e=[];return Array.isArray(t)?t.forEach((function(t){e.push(t.coupon_give_id)})):e.push(this.currentTableData[t].coupon_give_id),e},handleSelectionChange:function(t){this.multipleSelection=t},handleStatus:function(t,e){var a=this,n=this._getIdList(t);0!==n.length?this.$confirm("确定要执行该操作吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",closeOnClickModal:!1}).then((function(){"del"===e&&Object(o["a"])(n).then((function(){i["a"].deleteDataList(a.currentTableData,n,"coupon_give_id"),a.$message.success("操作成功")}))})).then((function(){"rec"===e&&Object(o["f"])(n).then((function(){i["a"].deleteDataList(a.currentTableData,n,"coupon_give_id"),a.$message.success("操作成功")}))})).catch((function(){})):this.$message.error("请选择要操作的数据")},handleInfo:function(){this.couponData?this.infoVisible=!0:this.$message.info("查询全部优惠劵时无法显示信息")}}},r=s,c=a("2877"),u=Object(c["a"])(r,n,l,!1,null,null,null);e["default"]=u.exports}}]);